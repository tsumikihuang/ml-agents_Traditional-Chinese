# 常見問題

## 腳本運行環境未正確建立

如果你還沒有將你的腳本運行版本從.NET 3.5切換到.NET 4.6或.NET 4.x，你會看到這個錯誤訊息:

```console
error CS1061: Type `System.Text.StringBuilder' does not contain a definition for `Clear' and no extension method `Clear' of type `System.Text.StringBuilder' could be found. Are you missing an assembly reference?
```

這是因為.NET 3.5不支持StringBuilder類別的Clear()方法，解決方法參考[在Unity內設置ML-Agents工具](Installation.md#setting-up-ml-agent-within-unity)。

## TensorFlowSharp flag not turned on

如果你已經匯入TensorFlowSharp插件，但還沒在腳本定義符號中將ENABLE_TENSORFLOW選項打勾，你將會看到下面的錯誤訊息:

```console
UnityAgentsException: The brain 3DBallLearning was set to inference mode but the Tensorflow library is not present in the Unity project.
```
這個錯誤訊息的出現是因為當選項ENABLE_TENSORFLOW未被選取，TensorFlowSharp插件將無法被使用，解決方法參考[在Unity內設置ML-Agents工具](Installation.md#setting-up-ml-agent-within-unity)。

## 環境許可錯誤

如果你在編輯器中直接匯入你的Unity環境，並沒有建置它，你可能需要給他額外的許可來執行它。

如果你在macOS接收到許可錯誤，執行:

```sh
chmod -R 755 *.app
```

或是在Linux:

```sh
chmod -R 755 *.x86_64
```

在Windows，你可以在[說明](https://technet.microsoft.com/en-us/library/cc754344(v=ws.11).aspx)中找到解決方法

## 環境連接超時

如果你能從`UnityEnvironment`啟動環境，但收到超時錯誤像這個:

```
UnityAgentsException: The Communicator was unable to connect. Please make sure the External process is ready to accept communication with Unity.
```

There may be a number of possible causes:

* _Cause_: There may be no LearningBrain with `Control` option checked in the
  `Broadcast Hub` of the Academy. In this case, the environment will not attempt
  to communicate with python. _Solution_: Click `Add New` in your Academy's
  `Broadcast Hub`, and drag your LearningBrain asset into the `Brains` field,
  and check the `Control` toggle. Also you need to assign this LearningBrain
  asset to all of the Agents you wish to do training on.
* _Cause_: On OSX, the firewall may be preventing communication with the
  environment. _Solution_: Add the built environment binary to the list of
  exceptions on the firewall by following
  [instructions](https://support.apple.com/en-us/HT201642).
* _Cause_: An error happened in the Unity Environment preventing communication.
  _Solution_: Look into the [log
  files](https://docs.unity3d.com/Manual/LogFiles.html) generated by the Unity
  Environment to figure what error happened.
* _Cause_: You have assigned HTTP_PROXY and HTTPS_PROXY values in your
  environment variables. _Solution_: Remove these values and try again.

## Communication port {} still in use

If you receive an exception `"Couldn't launch new environment because
communication port {} is still in use. "`, you can change the worker number in
the Python script when calling

```python
UnityEnvironment(file_name=filename, worker_id=X)
```

## Mean reward : nan

If you receive a message `Mean reward : nan` when attempting to train a model
using PPO, this is due to the episodes of the Learning Environment not
terminating. In order to address this, set `Max Steps` for either the Academy or
Agents within the Scene Inspector to a value greater than 0. Alternatively, it
is possible to manually set `done` conditions for episodes from within scripts
for custom episode-terminating events.

## Problems with training on AWS

Please refer to [Training on Amazon Web Service FAQ](Training-on-Amazon-Web-Service.md#faq)
